<!DOCTYPE html>
<header>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Security settings</title>
	<style>
		div#shadow {background-color:rgba(0,0,0,0.8); z-index:2000; width:100%; height:100%; position:absolute; left:0; top:0;}
		div#shadow div {position: absolute; top: 50%; transform: translate(-50%, -50%); left: 50%; margin-right: -50%; font-size: x-large; color: yellow;}
	</style>
	<link rel="stylesheet" href="styles.css">
	<link rel="icon" href="favicon.ico">
	<link rel="shortcut icon" sizes="192x192" href="android-icon.png">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<script src="functions.js" type="text/javascript" encoding="UTF-8"></script>
</header>
<html>
	<body>
		<div class="head">
			Управление часами.
			<div>настройки охраны</div>
		</div>
		<div class="content">
			<form action="save_telegram" autocomplete="off" method="post" name="settings">
				<div class="holder">
					<div class="row">
						<div class="b">Параметр</div>
						<div class="b">Значение</div>
					</div>
					<div class="one i b center">Общие настройки</div>
					<div class="row">
						<div>Включить датчик движения</div>
						<div><input name="use_move" type="checkbox" value="1"></div>
					</div>
					<div class="row">
						<div>Включить датчик освещённости</div>
						<div><input name="use_brightness" type="checkbox" value="1"></div>
					</div>
					<div class="row">
						<div>PIN для регистрации<br>
							<span class="small">и доступа к странице отправки сообщений по адресу <span class="nb">/send?pin=THIS_PIN&msg=YOUR_TEXT</span></span>
						</div>
						<div><input name="pin_code" type="text" value=""></div>
					</div>
					<div class="row">
						<div>Название часов в локальной сети (mDNS)</div>
						<div class="nb">http://<input name="clock_name" type="text" value="clock">.local</div>
					</div>
					<div class="row">
						<div>Время жизни сенсора, в минутах (1-16000)</div>
						<div><input name="sensor_timeout" type="text" value="20"></div>
					</div>
					<div class="one i b center">Настройки Telegram</div>
					<div class="one">
						Название / адрес бота:
						<input name="tb_name" type="text" class="long">
					</div>
					<div class="one">
						Chat ID (номера разрешенных чатов через запятую):
						<input name="tb_chats" type="text" class="long">
					</div>
					<div class="one">
						Bot token:
						<input name="tb_token" type="text" class="long">
					</div>
					<div class="row">
						<div>Пароль для активации чата</div>
						<div><input name="tb_secret" type="text" value="" class="m"></div>
					</div>
					<div class="row">
						<div>Интервал опроса новых сообщений, в секундах (0=откл.)</div>
						<div><input name="tb_rate" type="number" value="300"></div>
					</div>
					<div class="row">
						<div>Ускоренный интервал опроса новых сообщений, после нового сообщения, в секундах (1-600)</div>
						<div><input name="tb_accelerated" type="number" value="10"></div>
					</div>
					<div class="row">
						<div>Время на которе ускоряется опрос новых сообщений, после нового сообщения, в секундах (1-3600)</div>
						<div><input name="tb_accelerate" type="number" value="900"></div>
					</div>
					<div class="row">
						<div>Время на которе прекращается опрос новых сообщений, после сбоя, в секундах (900-3600)</div>
						<div><input name="tb_ban" type="number" value="1800"></div>
					</div>
				</div>
				<button>Сохранить</button>
			</form>
		</div>
		<div class="footer">
			<a href="security.html">Вернуться</a>
		</div>
		<div id="shadow"><div>Загрузка...</div></div>
	</body>
<script type="text/javascript" encoding="UTF-8">
function start() {
	if (typeof ajaxRequest !== "undefined") {
		fill_settings("telegram.json","settings", () => {
			$g("shadow").style.display = "none";
		});
	} else setTimeout(start, 100);
}
start();
</script>
</html>
