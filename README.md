# Часы на основе матрицы на адресных светодиодах.

Создано по мотивам проекта [GyverMatrixOS](https://alexgyver.ru/gyvermatrixbt/)
и его портированной на ESP-8266 версии [GyverMatrixWiFi](https://github.com/vvip-68/GyverMatrixWiFi/).
К сожалению эти проекты не для работы в обычном, нудном, режиме часов. В результате появился этот проект.
Есть ещё развития проекта [GyverLamp](https://github.com/AlexGyver/GyverLamp)/[GyverPanelWiFi](https://github.com/vvip-68/GyverPanelWiFi/wiki)/[FireLamp](https://github.com/DmytroKorniienko/FireLamp_JeeUI), но у каждого есть свои нюансы, свои преимущества и недостатки, по этому - больше разных велосипедов!
В описаниях этих проектов есть много полезной информации по подключению, сборке как железной части, так и программной, полезно заглянуть на эти странички.

## Возможности часов:
- Показывать время
- Выбор цветового оформления часов.
- Несколько будильников, которые можно настраивать на однократно, постоянный повтор или по дням недели.
- Выбор мелодии для каждого будильника.
- Бегущая строка - информатор. Несколько штук, для каждой можно настроить цветовое оформление и режим повтора.
- Резервное аккумуляторное питание. Во время пропадания основного питания экран включается только при срабатывании датчика движения.
- Использование датчика движения для информировании о постороннем присутствии (как датчик сигнализации) с отправкой уведомления в телеграмм.
- Управление через Web. "Охранные" функции можно использовать через телеграмм.
- Автоматическое управление яркостью матрицы по освещённости. (экономит электричество и не режет глаза ночью)
- Ограничение максимального потребления. Ночью потребление в автоматическом режиме снижается до 2,5Вт. Днём зависит от настроек и может достигать 70Вт. Ограничение по умолчанию - 12,5Вт.
- Минимальное число параметров жестко прописано в коде, большая часть настроек изменяется через Web.

## Управление:
Управление часами только через Web, так как бессмысленно управлять кучей опций парой кнопок. Однако есть одна кнопка и датчик движения. Датчик движения
используется для отключения будильника, что логично, раз кто-то ходит возле часов, значит он проснулся. А действия кнопки зависят от количества кликов:
- Показать дату в длинном формате, отключить будильник, отключить проверку матрицы.
- Включить проверку матрицы.
- Показать текущий IP, по которому можно подключится к часам.
- Показать текущие значения освещённости.
- Сбросить пароль на Web страничку.

Долгое нажатие - справка. Она контекстная, зависит от текущего режима.

## Особенности:
Проект делался под конкретные часы в конкретном месте по этому нет разнообразия в выборе функций или аппаратных компонентов.
Схема приведена в pdf и она только такая. Если не включить какой нибудь из компонент, то часы могут или не запуститься совсем или работать неправильно.

Нет модуля часов реального времени и нет возможности ввести время вручную. Если нет WiFi, то часы работать не будут!
Нет автоматического перехода зимнее/летнее время, его так давно хотят отменить, что я не вижу в этом смысла.

## Схема:
![SCHEME](https://github.com/SerhiiLe/clock-esp8266-ws2812b/blob/main/clock_diagram.pdf)
Не вошло в схему:
- Керамический конденсатор на 47пФ на питании датчика движения. Я не уверен, что он там нужен, впаял, в надежде улучшить стабильность срабатывания. Разницы не почувствовал.
- На задней стенке корпуса часов приклеил кусок фольги, напротив датчика движения. Срабатывание стало устойчивее, ложных срабатываний стало меньше.
